<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title -->
    <title>Credit - Loan &amp; Credit Company HTML Template</title>

    <!-- Favicon -->
    <link rel="icon" href="img/core-img/favicon.ico">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="formvay2-6.css">

</head>

<body>
    
    <div class="main-page" style="background-color: #f5f5f5 ">
        <div class="container">
            <div class="w-xl-85 mx-auto">
                <div class="w-85 w-lg-66 mx-auto pb-6">
                    <div style="height: 25px"></div>
                    <div class="step">
                        <div class="step-item ">
                            <div class="step-item-text text-uppercase">THÔNG TIN CÁ NHÂN</div>
                        </div>
                        <div class="step-item ">
                            <div class="step-item-text text-uppercase">VIỆC LÀM</div>
                        </div>
                        <div class="step-item ">
                            <div class="step-item-text text-uppercase">TÀI SẢN</div>
                        </div>
                        <div class="step-item ">
                            <div class="step-item-text text-uppercase">NGƯỜI THÂN</div>
                        </div>
                        <div class="step-item active">
                            <div class="step-item-text text-uppercase">HOÀN THÀNH</div>
                        </div>
                    </div>
                </div>

                <div class="box-2 mb-3">
                    <div class="box-2-header d-flex flex-column flex-md-row">
                        <h2 class="box-2-title mb-md-0 mb-3">Tải ảnh CMND</h2>

                        <div class="align-self-md-center ml-md-auto">
                            <p class="fs-12 text-gray-light mb-1" style="font-size: 20px; font-weight: 600">Khả năng nhận được khoản vay</p>

                            <div class="progress progress-style-1">
                                <div class="progress-bar" role="progressbar" style="width: 100%;" aria-valuenow="60"
                                    aria-valuemin="0" aria-valuemax="100">
                                    <span class="progress-tooltip">100%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <input type="hidden" id="hddTypeImg" value="0">
                    <input type="file" name="uploadImg" id="uploadImg" multiple="" style="display: none;"
                        accept="image/*">

                    <div class="uploadct bg-white p-md-5 pt-md-4 p-3">
                        <h2 class="text-uppercase fs-16 fw-6 mb-0" style="font-size: 30px; font-weight: 600">
                            Upload chứng từ
                        </h2>

                        <hr class="border-gray mt-md-4 mt-3 mb-0">

                        <div class="uploadct-item">
                            <div class="uploadct-item__header" onclick="UploadImg(1)">
                                <div class="upload btn-file mb-2">
                                    <div class="upload__icon">
                                        <span class="icon-id-card">
                                            <span class="upload__icon-plus"></span>
                                        </span>
                                    </div>
                                    <div class="upload__text">
                                        Nhân thân
                                    </div>

                                </div>

                                <em class="text-gray-light fs-13">
                                    CMND, Hộ chiếu, Thẻ căn cước
                                </em>
                            </div>

                            <div class="uploadct-item__body" id="divImgCardNumber" name="divImgCardNumber">

                            </div>
                        </div>

                        <div class="uploadct-item">
                            <div class="uploadct-item__header" onclick="UploadImg(2)">
                                <div class="upload btn-file mb-2">
                                    <div class="upload__icon">
                                        <span class="icon-house">
                                            <span class="upload__icon-plus"></span>
                                        </span>
                                    </div>
                                    <div class="upload__text">
                                        Cư trú
                                    </div>

                                </div>

                                <em class="text-gray-light fs-13">
                                    Sổ hộ khẩu, KT3, Tạm trú tạm vắng
                                </em>
                            </div>

                            <div class="uploadct-item__body" id="divImgLocation" name="divImgLocation">
                            </div>
                        </div>

                        <div class="uploadct-item">
                            <div class="uploadct-item__header" onclick="UploadImg(5)">
                                <div class="upload btn-file mb-2">
                                    <div class="upload__icon">
                                        <span class="icon-cardid-back">
                                            <span class="upload__icon-plus"></span>
                                        </span>
                                    </div>
                                    <div class="upload__text">
                                        Tài sản
                                    </div>

                                </div>

                                <em class="text-gray-light fs-13">
                                    Giấy tờ xe, ảnh xe, ảnh tài sản thế chấp...
                                </em>
                            </div>

                            <div class="uploadct-item__body" id="divImgContractAsset" name="divImgContractAsset">
                            </div>
                        </div>

                        <div class="uploadct-item">
                            <div class="uploadct-item__header" onclick="UploadImg(3)">
                                <div class="upload btn-file mb-2">
                                    <div class="upload__icon">
                                        <span class="icon-wallet-gray">
                                            <span class="upload__icon-plus"></span>
                                        </span>
                                    </div>
                                    <div class="upload__text">
                                        Thu nhập
                                    </div>

                                </div>

                                <em class="text-gray-light fs-13">
                                    Sao kê bảng lương. HĐLĐ, BHXH ...
                                </em>
                            </div>

                            <div class="uploadct-item__body" id="divImgContractAndSalary"
                                name="divImgContractAndSalary">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-between">
                    <a class="btn btn-lg btn-gray-lighter px-md-6" onclick="window.history.back();" href="#"
                        style="background-color: #d1d1d1; font-size: 14px; margin-bottom: 25px">QUAY
                        LẠI</a>
                    <button
                        onclick="gtag('event', 'STEP', { 'event_category': 'Create Loan Credit', 'event_label': 'STEP 2' })"
                        class="btn btn-lg btn-primary text-white px-md-6 ml-auto"
                        style="font-size: 14px; margin-bottom: 25px;">
                        HOÀN THÀNH
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function UploadImg(typeId) {
            $("#hddTypeImg").val(typeId);
            $("#uploadImg").click();
        }

        $("#uploadImg").change(function () {
            var typeImg = parseInt($("#hddTypeImg").val());
            var formData = new FormData();
            var totalFiles = document.getElementById("uploadImg").files.length;
            for (var i = 0; i < totalFiles; i++) {
                var file = document.getElementById("uploadImg").files[i];
                formData.append("uploadImg", file);
                formData.append("typeImg", typeImg);
            }
            $.ajax({
                type: "POST",
                url: '/User/UploadImg',
                data: formData,
                dataType: 'json',
                contentType: false,
                processData: false,
            }).done(function (data) {
                if (data.Error === 0) {
                    if (data.lstData.Files.length > 0) {
                        $.each(data.lstData.Files, function (index, value) {
                            DisplayPhotoitem(typeImg, data.lstData.Files[index].UrlImage);
                        });
                    }
                }
            });
        });

        function DisplayPhotoitem(typeImg, pathImg) {
            var ImageAffirmationCardNumber = 1;
            var ImageAffirmationLocation = 2;
            var ImageAffirmationContractAndSalary = 3;
            var ImageSelfie = 4;
            var ImageAsset = 5;

            if (typeImg === ImageAffirmationCardNumber) {
                $("#divImgCardNumber").append('<div class="uploadct-item__img mr-5"> <img class="img-fluid" src="' +
                    pathImg + '" alt=""/> </div>');
            } else if (typeImg === ImageAffirmationLocation) {
                $("#divImgLocation").append('<div class="uploadct-item__img mr-5"> <img class="img-fluid" src="' +
                    pathImg + '" alt=""> </div>');
            } else if (typeImg === ImageAffirmationContractAndSalary) {
                $("#divImgContractAndSalary").append(
                    '<div class="uploadct-item__img mr-5"> <img class="img-fluid" src="' + pathImg +
                    '" alt=""> </div>');
            } else if (typeImg === ImageSelfie) {
                $("#divImganhchandung").append('<div class="uploadct-item__img mr-5"> <img class="img-fluid" src="' +
                    pathImg + '" alt=""> </div>');
            } else if (typeImg === ImageAsset) {
                $("#divImgContractAsset").append('<div class="uploadct-item__img mr-5"> <img class="img-fluid" src="' +
                    pathImg + '" alt=""> </div>');
            }
        }


        $(document).ready(function () {
            $("#frmFillDataLoanCredit").validate({
                rules: {
                    divImgCardNumber: {
                        required: true
                    },
                    divImgLocation: {
                        required: true
                    },
                    divImgContractAndSalary: {
                        required: true
                    }

                },
                messages: {
                    divImgCardNumber: {
                        required: "Vui lòng upload ảnh nhân thân",
                    },
                    divImgLocation: {
                        required: "Vui lòng upload ảnh cư trú",
                    },
                    divImgContractAndSalary: {
                        required: "Vui lòng upload ảnh thu nhập",
                    }
                }
            });

        });
    </script>
</body>

</html>